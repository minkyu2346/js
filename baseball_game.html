<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>숫자야구</title>
</head>
<body>
<form id="form">
  <input type="text" id="input">
  <button>확인</button>
</form>
<div id="logs"></div>
<script>
const $input = document.querySelector('#input');
const $form = document.querySelector('#form');
const $logs = document.querySelector('#logs');
const $confirm = document.querySelector('button')  
const answer = [];
let inference = [];
const numbers = [0,1,2,3,4,5,6,7,8,9];
let homerun;
let strike = 0 ;
let ball = [];
let count = 0;
let strikeval = []
let ballcount = 0;
for(let i = 10 ; i >6 ;i--) {
  index=Math.floor(Math.random()*i)
  answer.push(numbers[index])
  numbers.splice(index,1)
  console.log(answer)
  
}



const onclickButton = (event) => {
        event.preventDefault();
        if($input.value >10 || $input.value <-1 || $input.value===''){
        alert("0부터 9 사이의 숫자를 입력하세요")
        }
      
        else if(inference.length >4){
            alert("숫자 입력 갯수 초과")
          }
        
          
        else{ 
          
          
          for(let i = 0 ; i <inference.length ;i++){
            if (inference[i]==$input.value){
              alert("중복 숫자는 입력 불가능")
              
              setTimeout(function ()  {
                inference.splice(-1,1);
                $logs.append(dou)
              },1000);
              
              console.log(inference)
            }
          }
          inference.push($input.value)
          $logs.append(document.createTextNode(inference[inference.length-1]))
          console.log(inference)
          $input.value = ''
        if(inference.length===4){
          //홈런 볼 스트라이크 판별
          

          if (inference.join('')===answer.join('')){
            $logs.append(document.createTextNode(" : 홈런"));
            $logs.append(document.createElement("br"));
            $logs.append(document.createTextNode( " 다시 하려면 새로고침을 누르세요"))
            return
          }
        for(let i = 0 ; i<4 ; i++){
          if(inference[i]==answer[i]) {
              
              strike+=1
              
              strikeval.push(inference[i])
              console.log("strikeval : " , strikeval)
              ball = inference
            }
          }
          for (let i = 0 ; i < strikeval.length  ; i++){
            ball.splice(ball.indexOf(strikeval[i]) ,1)
            answer1 = JSON.parse(JSON.stringify(answer));
            answer1.splice((answer1.indexOf(parseInt(strikeval[i]))),1)
            
            console.log("ball :" , ball)
            console.log("answer : " , answer1)
            console.log("answer real : ", answer)
          }
        for( let j = 0 ; j<ball.length ; j ++){  
          for ( let i = 0 ; i<ball.length ; i++) {
            if(ball[i]==answer1[i]){
              ballcount+=1
            }
            
          }
        
        ball.push(ball.shift());
        }
        console.log("ball 갯수는 " , ballcount , "strike 갯수는 " ,strike)
            $logs.append(document.createTextNode(" 볼 개수는 :"))
            $logs.append(document.createTextNode(ballcount));
            $logs.append(document.createTextNode(" 스트라이크 개수는 :"))
            $logs.append(document.createTextNode(strike));
            $logs.append(document.createElement("br"));
            count++;
            strikeval = []
            ballcount = 0;
            strike = 0 ;
            ball = [];
            inference = [];
        if(count >10){
          $logs.append(document.createTextNode("게임 오버"))
        }
          }
        }
      }
        
$form.addEventListener('click' , onclickButton)
</script>
</body>
</html>